(function($){$.fn.collapsible=function(options){var defaults={accordion:undefined,onOpen:undefined,onClose:undefined};options=$.extend(defaults,options);return this.each(function(){var $this=$(this);var $panel_headers=$(this).find("> li > .collapsible-header");var collapsible_type=$this.data("collapsible");$this.off("click.collapse","> li > .collapsible-header");$panel_headers.off("click.collapse");function accordionOpen(object){$panel_headers=$this.find("> li > .collapsible-header");if(object.hasClass("active")){object.parent().addClass("active")}else{object.parent().removeClass("active")}if(object.parent().hasClass("active")){object.siblings(".collapsible-body").stop(true,false).slideDown({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css("height","")}})}else{object.siblings(".collapsible-body").stop(true,false).slideUp({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css("height","")}})}$panel_headers.not(object).removeClass("active").parent().removeClass("active");$panel_headers.not(object).parent().children(".collapsible-body").stop(true,false).each(function(){if($(this).is(":visible")){$(this).slideUp({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css("height","");execCallbacks($(this).siblings(".collapsible-header"))}})}})}function expandableOpen(object){if(object.hasClass("active")){object.parent().addClass("active")}else{object.parent().removeClass("active")}if(object.parent().hasClass("active")){object.siblings(".collapsible-body").stop(true,false).slideDown({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css("height","")}})}else{object.siblings(".collapsible-body").stop(true,false).slideUp({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css("height","")}})}}function collapsibleOpen(object){if(options.accordion||collapsible_type==="accordion"||collapsible_type===undefined){accordionOpen(object)}else{expandableOpen(object)}execCallbacks(object)}function execCallbacks(object){if(object.hasClass("active")){if(typeof options.onOpen==="function"){options.onOpen.call(this,object.parent())}}else{if(typeof options.onClose==="function"){options.onClose.call(this,object.parent())}}}function isChildrenOfPanelHeader(object){var panelHeader=getPanelHeader(object);return panelHeader.length>0}function getPanelHeader(object){return object.closest("li > .collapsible-header")}$this.on("click.collapse","> li > .collapsible-header",function(e){var element=$(e.target);if(isChildrenOfPanelHeader(element)){element=getPanelHeader(element)}element.toggleClass("active");collapsibleOpen(element)});if(options.accordion||collapsible_type==="accordion"||collapsible_type===undefined){collapsibleOpen($panel_headers.filter(".active").first())}else{$panel_headers.filter(".active").each(function(){collapsibleOpen($(this))})}})};$(document).ready(function(){$(".collapsible").collapsible()})})(jQuery);